<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [getCurrentIsoTimestamp][1]
-   [removeTrailingSlashes][2]
-   [simpleObjectDeepClone][3]
-   [findElementType][4]
-   [findElementId][5]
-   [buildQueryString][6]
-   [encodeXML][7]
-   [buildChangesetXml][8]
-   [buildChangesetFromObjectXml][9]
-   [buildPreferencesFromObjectXml][10]
-   [convertElementXmlToJson][11]
-   [cleanWaysJsonFragment][12]
-   [cleanMapJson][13]
-   [convertWaysXmlToJson][14]
-   [convertRelationsXmlToJson][15]
-   [convertNotesXmlToJson][16]
-   [flattenAttributes][17]
-   [xmlToJson][18]
-   [jsonToXml][19]
-   [OsmRequest][20]
    -   [endpoint][21]
    -   [fetchNotes][22]
    -   [createChangeset][23]
    -   [isChangesetStillOpen][24]
    -   [updateChangesetTags][25]
    -   [createNodeElement][26]
    -   [fetchElement][27]
    -   [fetchRelationsForElement][28]
    -   [fetchWaysForNode][29]
    -   [setProperty][30]
    -   [setProperties][31]
    -   [removeProperty][32]
    -   [setCoordinates][33]
    -   [setTimestampToNow][34]
    -   [setVersion][35]
    -   [sendElement][36]
    -   [fetchMapByBbox][37]
    -   [deleteElement][38]
    -   [getUserPreferences][39]
    -   [setUserPreferences][40]
    -   [getUserPreferenceByKey][41]
    -   [setUserPreferenceByKey][42]
    -   [deleteUserPreference][43]
-   [fetchElementRequest][44]
-   [fetchElementRequestFull][45]
-   [fetchWaysForNodeRequest][46]
-   [sendElementRequest][47]
-   [fetchNotesRequest][48]
-   [createChangesetRequest][49]
-   [changesetCheckRequest][50]
-   [updateChangesetTagsRequest][51]
-   [fetchMapByBbox][52]
-   [deleteElementRequest][53]
-   [fetchRelationsForElementRequest][54]
-   [getUserPreferencesRequest][55]
-   [setUserPreferencesRequest][56]
-   [getUserPreferenceByKeyRequest][57]
-   [setUserPreferenceByKeyRequest][58]
-   [deleteUserPreferenceRequest][59]

## getCurrentIsoTimestamp

Get the current timestamp (for testing purpose)

Returns **[string][60]** 

## removeTrailingSlashes

Remove the trailing slashes from an URL and return it

**Parameters**

-   `url` **[string][60]** 

Returns **[string][60]** The cleaned URL

## simpleObjectDeepClone

Return a deep clone of an object.

The object has to be a simple object notation. Not a Map, a Set or anything else.

Object.assign and the spread operators can not be used as they do not replace children objects
by copies of themselves.

Eg: If you use Object.assign or the rest operator on that object: { items: [{ childrenItem: 1 }] }
All the objects contained in the items array will be references to the first objects

**Parameters**

-   `object` **[Object][61]** A simple object notation. No Map, Set or anything

Returns **[Object][61]** 

## findElementType

Return the type of an element based on the full OSM ID

**Parameters**

-   `osmId` **[string][60]** 

Returns **[string][60]** 

## findElementId

Return the ID of an element based on the full OSM ID

**Parameters**

-   `osmId` **[string][60]** 

Returns **[string][60]** 

## buildQueryString

**Parameters**

-   `params` **[Object][61]** 

Returns **[string][60]** 

## encodeXML

Escape a string to make it XML parameter-safe

**Parameters**

-   `str` **[string][60]**  (optional, default `''`)

Returns **[string][60]** 

## buildChangesetXml

Build a stringified OSM changeset

**Parameters**

-   `createdBy` **[string][60]?**  (optional, default `''`)
-   `comment` **[string][60]?**  (optional, default `''`)

Returns **[string][60]** 

## buildChangesetFromObjectXml

Build an OSM changeset from object keys values, intended for update

**Parameters**

-   `object`  

Returns **[string][60]** 

## buildPreferencesFromObjectXml

Build an OSM preferences XML from object keys values

**Parameters**

-   `object`  

Returns **[string][60]** 

## convertElementXmlToJson

Convert a raw Element API response into a well formatted JSON object

**Parameters**

-   `xml` **[string][60]** The raw API response
-   `elementType` **[string][60]** The type of the concerned OSM element (eg: node, way, relation)
-   `elementId` **[string][60]** The ID of the concerned OSM element

Returns **[Promise][62]** 

## cleanWaysJsonFragment

Convert a JSON list of ways fragment into a well formatted JSON object

**Parameters**

-   `wayKey` **[Object][61]** The raw API response
-   `rootOsmMetadata` **[Object][61]** The raw API response

Returns **[Array][63]** 

## cleanMapJson

Convert a JSON object with OSM map features into a well formatted JSON object

**Parameters**

-   `osmMapJson` **[Object][61]** The raw API response

Returns **[Array][63]** 

## convertWaysXmlToJson

Convert a raw list of ways API response into a well formatted JSON object

**Parameters**

-   `xml` **[string][60]** The raw API response

Returns **[Promise][62]** 

## convertRelationsXmlToJson

Convert list of relations into a well formatted JSON object

**Parameters**

-   `xml` **[string][60]** The raw API response

Returns **[Promise][62]** 

## convertNotesXmlToJson

Convert a raw Notes API response into a well formatted JSON object

**Parameters**

-   `xml` **[string][60]** The raw API response

Returns **[Promise][62]** 

## flattenAttributes

XML converted with the xmlToJson function contain some weird objects
Eg:
{
  $: {
    attribute1: 'value1',
    attribute2: 'value2'
  },
  attribute3: ['value3'],
  attribute4: ['value4'],
}

That function flatten them
Eg:
{
  attribute1: 'value1',
  attribute2: 'value2',
  attribute3: 'value3',
  attribute4: 'value4',
}

**Parameters**

-   `object` **[Object][61]** 

Returns **[Object][61]** 

## xmlToJson

Convert a stringified XML into a JSON object

**Parameters**

-   `xml` **[string][60]** 

Returns **[Promise][62]** 

## jsonToXml

Convert a JSON object into a stringified XML

**Parameters**

-   `json` **[Object][61]** 

Returns **[string][60]** 

## OsmRequest

OSM API request handler

**Parameters**

-   `options` **[Object][61]?** Custom options to apply (optional, default `{}`)

### endpoint

Return the API endpoint to use for the requests

Returns **[string][60]** URL of the API endpoint

### fetchNotes

Retrieve the OSM notes in given bounding box

**Parameters**

-   `left` **[number][64]** The minimal longitude (X)
-   `bottom` **[number][64]** The minimal latitude (Y)
-   `right` **[number][64]** The maximal longitude (X)
-   `top` **[number][64]** The maximal latitude (Y)
-   `limit` **[number][64]?** The maximal amount of notes to retrieve (between 1 and 10000, defaults to 100) (optional, default `null`)
-   `closedDays` **[number][64]?** The amount of days a note needs to be closed to no longer be returned (defaults to 7, 0 means only opened notes are returned, and -1 means all notes are returned) (optional, default `null`)

Returns **[Promise][62]** Resolves on notes list

### createChangeset

Send a request to OSM to create a new changeset

**Parameters**

-   `createdBy` **[string][60]?**  (optional, default `''`)
-   `comment` **[string][60]?**  (optional, default `''`)

Returns **[Promise][62]** 

### isChangesetStillOpen

Check if a changeset is still open

**Parameters**

-   `changesetId` **[number][64]** 

Returns **[Promise][62]** 

### updateChangesetTags

Update changeset tags if still open

**Parameters**

-   `changesetId` **[number][64]** 
-   `object` **[Object][61]** use to set multiples tags


-   Throws **any** Will throw an error for any request with http code 40x

Returns **[Promise][62]** 

### createNodeElement

Create a shiny new OSM node element, in a JSON format

**Parameters**

-   `lat` **[number][64]** 
-   `lon` **[number][64]** 
-   `properties` **[Object][61]?** Optional, initial properties (optional, default `{}`)

Returns **[Object][61]** 

### fetchElement

Fetch an OSM element by its ID and optionnally
all other elements referenced by it

**Parameters**

-   `osmId` **[string][60]** Eg: node/12345
-   `options` **[Object][61]** Optional parameters
    -   `options.full` **[boolean][65]?** True for getting all elements referenced by this element

Returns **[Promise][62]** 

### fetchRelationsForElement

Fetch relation(s) from an OSM element

**Parameters**

-   `osmId` **[string][60]** Eg: node/12345

Returns **[Promise][62]** 

### fetchWaysForNode

Fetch ways using the given OSM node

**Parameters**

-   `osmId` **[string][60]** Eg: node/12345

Returns **[Promise][62]** Resolve on ways array (each one can be used as an Element for all other functions)

### setProperty

Add or replace a property in a given element

**Parameters**

-   `element` **[Object][61]** 
-   `propertyName` **[string][60]** 
-   `propertyValue` **[string][60]** 

Returns **[Object][61]** A new version of the element

### setProperties

Add or replace several properties in a given element

**Parameters**

-   `element` **[Object][61]** 
-   `properties` **[Object][61]** 

Returns **[Object][61]** A new version of the element

### removeProperty

Remove a property from a given element

**Parameters**

-   `element` **[Object][61]** 
-   `propertyName` **[string][60]** 

Returns **[Object][61]** A new version of the element

### setCoordinates

Replace the coordinates of the OSM node and return a copy of the element

**Parameters**

-   `element` **[Object][61]** 
-   `lat` **[number][64]** 
-   `lon` **[number][64]** 

Returns **[Object][61]** A new version of the element

### setTimestampToNow

Set the current UTC date to a given element

**Parameters**

-   `element` **[Object][61]** 

Returns **[Object][61]** A new version of the element

### setVersion

Change the version number (given by API) of an element

**Parameters**

-   `element` **[Object][61]** 
-   `version` **int** 

Returns **[Object][61]** A new version of the element

### sendElement

Send an element to OSM

**Parameters**

-   `element` **[Object][61]** 
-   `changesetId` **[number][64]** 

Returns **[Promise][62]** 

### fetchMapByBbox

Request to fetch all OSM elements within a bbox extent

**Parameters**

-   `left` **[number][64]** The minimal longitude (X)
-   `bottom` **[number][64]** The minimal latitude (Y)
-   `right` **[number][64]** The maximal longitude (X)
-   `top` **[number][64]** The maximal latitude (Y)

Returns **[Promise][62]** 

### deleteElement

Delete an element from OSM

**Parameters**

-   `element` **[Object][61]** 
-   `changesetId` **[number][64]** 

Returns **[Promise][62]** Promise with the new version number due to deletion

### getUserPreferences

Get all preferences from connected user

Returns **[Promise][62]** Promise with Well formatted JSON of user preferences

### setUserPreferences

Set all preferences for a connected user

**Parameters**

-   `object` **[Object][61]** An object to provide keys values to create XML preferences

Returns **[Promise][62]** Promise

### getUserPreferenceByKey

Get a preference from a key for the connected user

**Parameters**

-   `key` **[string][60]** The key to retrieve

Returns **[Promise][62]** Promise with the value for the key

### setUserPreferenceByKey

Set a preference from a key for the connected user

**Parameters**

-   `key` **[string][60]** The key to set.
-   `value` **[string][60]** The value to set. Overwrite existing value if key exists

Returns **[Promise][62]** Promise

### deleteUserPreference

Delete a preference from a key for the connected user

**Parameters**

-   `key` **[string][60]** The key to use.

Returns **[Promise][62]** Promise

## fetchElementRequest

Request to fetch an OSM element

**Parameters**

-   `endpoint` **[string][60]** The API endpoint
-   `osmId` **[string][60]** 

Returns **[Object][61]** 

## fetchElementRequestFull

Request to fetch way or relation and all other elements referenced by it

**Parameters**

-   `endpoint` **[string][60]** The API endpoint
-   `osmId` **[string][60]** Can only contain either a way or a relation

Returns **[Promise][62]** Promise with well formatted JSON content

## fetchWaysForNodeRequest

Request to fetch ways using the given OSM node

**Parameters**

-   `endpoint` **[string][60]** The API endpoint
-   `osmId` **[string][60]** 

Returns **[Object][61]** 

## sendElementRequest

Send an element to OSM

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `element` **[Object][61]** 
-   `changesetId` **[number][64]** 

Returns **[Promise][62]** 

## fetchNotesRequest

Request to fetch OSM notes

**Parameters**

-   `endpoint` **[string][60]** The API endpoint
-   `left` **[number][64]** The minimal longitude (X)
-   `bottom` **[number][64]** The minimal latitude (Y)
-   `right` **[number][64]** The maximal longitude (X)
-   `top` **[number][64]** The maximal latitude (Y)
-   `limit` **[number][64]?** The maximal amount of notes to retrieve (between 1 and 10000, defaults to 100) (optional, default `null`)
-   `closedDays` **[number][64]?** The amount of days a note needs to be closed to no longer be returned (defaults to 7, 0 means only opened notes are returned, and -1 means all notes are returned) (optional, default `null`)

Returns **[Object][61]** 

## createChangesetRequest

Request to create OSM changesets

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `createdBy` **[string][60]?**  (optional, default `''`)
-   `comment` **[string][60]?**  (optional, default `''`)

Returns **[Promise][62]** 

## changesetCheckRequest

Checks if a given changeset is still opened at OSM.

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `changesetId` **[number][64]** 

Returns **[Promise][62]** 

## updateChangesetTagsRequest

Update tags if a given changeset is still opened at OSM.

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `changesetId` **[number][64]** 
-   `object` **[Object][61]** use to set multiples tags


-   Throws **any** Will throw an error for any request with http code 40x.

Returns **[Promise][62]** 

## fetchMapByBbox

Request to fetch all OSM elements within a bbox extent

**Parameters**

-   `endpoint` **[string][60]** The API endpoint
-   `left` **[number][64]** The minimal longitude (X)
-   `bottom` **[number][64]** The minimal latitude (Y)
-   `right` **[number][64]** The maximal longitude (X)
-   `top` **[number][64]** The maximal latitude (Y)

Returns **[Promise][62]** 

## deleteElementRequest

Delete an OSM element

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `element` **[Object][61]** 
-   `changesetId` **[number][64]** 

Returns **[Promise][62]** Promise with the new version number due to deletion

## fetchRelationsForElementRequest

Request to fetch relation(s) from an OSM element

**Parameters**

-   `endpoint` **[string][60]** The API endpoint
-   `osmId` **[string][60]** 

Returns **[Promise][62]** 

## getUserPreferencesRequest

Request to fetch preferences for the connected user

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint


-   Throws **any** Will throw an error for any request with http code 40x.

Returns **[Promise][62]** Promise with the value for the key

## setUserPreferencesRequest

Request to set all preferences for a connected user

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `object` **[Object][61]** An object to provide keys values to create XML preferences

Returns **[Promise][62]** Promise

## getUserPreferenceByKeyRequest

Request to fetch a preference from a key for the connected user

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `key` **[string][60]** The key to retrieve


-   Throws **any** Will throw an error for any request with http code 40x.

Returns **[Promise][62]** Promise with the value for the key

## setUserPreferenceByKeyRequest

Request to set a preference from a key for the connected user

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `key` **[string][60]** The key to set
-   `value` **[string][60]** The value to set. Overwrite existing value if key exists

Returns **[Promise][62]** Promise

## deleteUserPreferenceRequest

Request to delete a preference from a key for the connected user

**Parameters**

-   `auth` **osmAuth** An instance of osm-auth
-   `endpoint` **[string][60]** The API endpoint
-   `key` **[string][60]** The key to use

Returns **[Promise][62]** Promise

[1]: #getcurrentisotimestamp

[2]: #removetrailingslashes

[3]: #simpleobjectdeepclone

[4]: #findelementtype

[5]: #findelementid

[6]: #buildquerystring

[7]: #encodexml

[8]: #buildchangesetxml

[9]: #buildchangesetfromobjectxml

[10]: #buildpreferencesfromobjectxml

[11]: #convertelementxmltojson

[12]: #cleanwaysjsonfragment

[13]: #cleanmapjson

[14]: #convertwaysxmltojson

[15]: #convertrelationsxmltojson

[16]: #convertnotesxmltojson

[17]: #flattenattributes

[18]: #xmltojson

[19]: #jsontoxml

[20]: #osmrequest

[21]: #endpoint

[22]: #fetchnotes

[23]: #createchangeset

[24]: #ischangesetstillopen

[25]: #updatechangesettags

[26]: #createnodeelement

[27]: #fetchelement

[28]: #fetchrelationsforelement

[29]: #fetchwaysfornode

[30]: #setproperty

[31]: #setproperties

[32]: #removeproperty

[33]: #setcoordinates

[34]: #settimestamptonow

[35]: #setversion

[36]: #sendelement

[37]: #fetchmapbybbox

[38]: #deleteelement

[39]: #getuserpreferences

[40]: #setuserpreferences

[41]: #getuserpreferencebykey

[42]: #setuserpreferencebykey

[43]: #deleteuserpreference

[44]: #fetchelementrequest

[45]: #fetchelementrequestfull

[46]: #fetchwaysfornoderequest

[47]: #sendelementrequest

[48]: #fetchnotesrequest

[49]: #createchangesetrequest

[50]: #changesetcheckrequest

[51]: #updatechangesettagsrequest

[52]: #fetchmapbybbox-1

[53]: #deleteelementrequest

[54]: #fetchrelationsforelementrequest

[55]: #getuserpreferencesrequest

[56]: #setuserpreferencesrequest

[57]: #getuserpreferencebykeyrequest

[58]: #setuserpreferencebykeyrequest

[59]: #deleteuserpreferencerequest

[60]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[61]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[62]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[63]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[64]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[65]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
